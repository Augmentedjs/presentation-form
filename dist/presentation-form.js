!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("next-core-utilities"),require("presentation-decorator"),require("presentation-request"),require("presentation-models"),require("presentation-dom"),require("presentation-widget")):"function"==typeof define&&define.amd?define("presentation-form",["next-core-utilities","presentation-decorator","presentation-request","presentation-models","presentation-dom","presentation-widget"],t):"object"==typeof exports?exports["presentation-form"]=t(require("next-core-utilities"),require("presentation-decorator"),require("presentation-request"),require("presentation-models"),require("presentation-dom"),require("presentation-widget")):e["presentation-form"]=t(e["next-core-utilities"],e["presentation-decorator"],e["presentation-request"],e["presentation-models"],e["presentation-dom"],e["presentation-widget"])}(this,(function(e,t,i,s,r,n){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=1)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(8);t.default=(e,t,i,r,n,o,l,a,d,u,h,c,p=!1,m=!1)=>{const f=document.createElement(c),g=document.createElement("fieldset"),y=Object.keys(i),b=l?l.length:y.length;let _,v,x,q,O,C;if(h){const e=h.split(" ");if(e)for(v=0;v<e.length;v++)f.classList.add(e[v])}if(f.appendChild(g),e){const i=document.createElement("legend");if(_=document.createTextNode(e),t){const e=document.createAttribute("title");e.value=t,i.setAttributeNode(e)}i.appendChild(_),g.appendChild(i)}for(l||(l=y),v=0;v<b;v++){let e=!0;if(l&&(e=-1!==y.indexOf(l[v])),e){C=document.createElement("div");let e="input";m&&(e+=" large"),O=-1!==n.indexOf(l[v]),q=document.createElement("label"),q.setAttribute("for",l[v]),_=document.createTextNode(i[l[v]].description),q.appendChild(_),x=s.Widget.Input(i[l[v]],l[v],r[l[v]],l[v],O,o),"SELECT"===x.tagName&&(e="select"),C.setAttribute("class",e),x.setAttribute("placeholder",l[v]),a?(x&&q.appendChild(x),C.appendChild(q)):p?(C.appendChild(q),x&&C.appendChild(x)):(x&&C.appendChild(x),C.appendChild(q)),g.appendChild(C)}}if(u){const e=document.createElement("button");e.setAttribute("type","reset"),e.setAttribute(`data-${o}`,"reset"),e.setAttribute("data-click","reset");const t=document.createTextNode(u);e.appendChild(t),f.appendChild(e)}if(d){const e=document.createElement("button");e.setAttribute("type","submit"),e.setAttribute(`data-${o}`,"submit"),e.setAttribute("data-click","submit");const t=document.createTextNode(d);e.appendChild(t),f.appendChild(e)}return f}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formCompile=t.AutomaticForm=void 0;var s=n(i(2)),r=n(i(0));function n(e){return e&&e.__esModule?e:{default:e}}t.AutomaticForm=s.default,t.formCompile=r.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(3),r=i(4),n=i(5),o=i(6),l=u(i(7)),a=u(i(0)),d=u(i(9));function u(e){return e&&e.__esModule?e:{default:e}}class h extends r.DecoratorView{constructor(e){if(e||(e={}),e.tagName||(e.tagName="form"),super(e),this.crossOrigin=!1,this._fields={},this.uri=null,this.isInitalized=!1,this.title=null,this.description="",this._required=[],this.display=null,this.nestedInput=!1,this.submitButton=!1,this.resetButton=!1,this.legacy=!1,this.large=!1,e.legacy&&(this.legacy=e.legacy),e.large&&(this.large=e.large),this.model&&e&&e.clearForm?this.model.clear():this.model||(this.model=new o.Model),e.submitButton&&(this.submitButton=e.submitButton),e.resetButton&&(this.resetButton=e.resetButton),e.nestedInput&&(this.nestedInput=e.nestedInput),e.crossOrigin&&(this.crossOrigin=e.crossOrigin),e.schema)if((0,s.isObject)(e.schema))this.schema=e.schema;else{let t=null;try{t=JSON.parse(e.schema),t&&(0,s.isObject)(t)&&(this.schema=t)}catch(e){console.warn(`AUGMENTED: AutoForm "${this.name}" parsing string schema failed.  URI perhaps?`)}this.schema||(this._retrieveSchema(e.schema),this.isInitalized=!1)}e.el&&(this.el=e.el),e.uri&&(this.uri=e.uri),e.style?this.style=e.style:this.style="material",e.data&&(0,s.isObject)(e.data)&&this.model.set(e.data),e.title&&(this.title=e.title),e.description&&(this.description=e.description),e.display&&(this.display=e.display),this.model&&this.uri&&(this.model.uri=this.uri),this.model&&(this.model.crossOrigin=this.crossOrigin),this.schema?(this.name&&""!==this.name||!this.schema.title||(this.name=this.schema.title),this.description&&""!==this.description||!this.schema.description||(this.description=this.schema.description),this.schema.required?this._required=this.schema.required:this._required=[],this.isInitalized||(this._fields=this.schema.properties,this.model.schema=this.schema,this.isInitalized=!0)):this.isInitalized=!1}_retrieveSchema(e){const t=this;return(0,n.request)({url:e,contentType:"application/json",dataType:"json",success:(e,i)=>{let s=null;s="string"==typeof e?JSON.parse(e):e,t.initialize({schema:s})},error:(e,t)=>{console.error(`${this.name} Failed to fetch schema!`,t)}})}setURI(e){this.uri=e}setSchema(e){this.schema=e,this._fields=e.properties,this.model.reset(),this.model.schema=e,this.uri&&(model.uri=this.uri)}showProgressBar(e){if(this.el){const t=l.default.selector(this.el);if(t){const i=t.querySelector("progress");i&&(i.style.display=e?"block":"none",i.style.visibility=e?"visible":"hidden")}}}showMessage(e){if(this.el){const t=l.default.selector(this.el);if(t){const i=t.querySelector("p[class=message]");i&&(i.innerHTML=e)}}}validate(){let e=this.model?this.model.validate():null;return!this.model.isValid()&&e&&e.messages?this.showMessage((0,d.default)(e.messages)):this.showMessage(""),e}isValid(){return!this.model||this.model.isValid()}render(){if(!this.isInitalized)return console.warn(`${this.name} Can't render yet, not initialized!`),this;if(this.template=null,this.showProgressBar(!0),!this.el)return console.warn(`${this.name} no element anchor, not rendering.`),this.showProgressBar(!1),this;{const e=l.default.selector(this.el);if(e){this.theme&&l.default.addClass(e,this.theme);let t=document.createElement("progress"),i=document.createTextNode("Please wait.");t.appendChild(i),e.appendChild(t);const s=(0,a.default)(this.title?this.title:null,this.description,this._fields,this.model.toJSON(),this._required,this.name,this.display,this.nestedInput,this.submitButton,this.resetButton,this.style,this.tagName,this.legacy,this.large);s&&e.appendChild(s),this._formEl=l.default.query(this.tagName,this.el),t=document.createElement("p"),t.classList.add("message"),e.appendChild(t)}}return this.delegateEvents(),this.syncAllBoundElements(),this.showProgressBar(!1),this}reset(){return this._formEl&&(this._formEl.reset&&this._formEl.reset(),this.model.reset()),this}populate(e){return this.model.set(e),this}remove(){return this.undelegateEvents(),this.off(),this.stopListening(),l.default.empty(this.el),this}}t.default=h},function(t,i){t.exports=e},function(e,i){e.exports=t},function(e,t){e.exports=i},function(e,t){e.exports=s},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{let t="";if(e&&e.length>0){t+='<ul class="errors">';const i=e.length;let s=0,r=0;for(s=0;s<i;s++){const i=e[s].errors.length;for(r=0;r<i;r++)t+=`<li>${e[s].errors[r]}</li>`}t+="</ul>"}return t}}])}));
//# sourceMappingURL=presentation-form.js.map